(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{30:function(e,t,n){e.exports={list:"ContactList_list__2T7aG",item:"ContactList_item__3YsZK",button:"ContactList_button__1RuFy"}},33:function(e,t,n){e.exports={input:"Filter_input__2DoVp"}},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var r,c,a,i=n(0),s=n.n(i),u=n(27),o=n.n(u),l=n(4),j=n(43),b=n(17),d=n(24),O=n(6),p=n(16),h=n(44),f=n.n(h),m=n(3),x=n(8),v=(Object(O.b)("contacts/Create"),Object(O.b)("contacts/Filter")),g=n(9),y=n.n(g),k=n(14),w=n(12),C=n.n(w),I=Object(O.c)("contacts/getContact",function(){var e=Object(k.a)(y.a.mark((function e(t,n){var r,c,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,C.a.get("https://619416bd0b39a70017b1570d.mockapi.io/api/v1/contacts");case 4:return c=e.sent,a=c.data,e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),L=Object(O.c)("contacts/addContact",function(){var e=Object(k.a)(y.a.mark((function e(t,n){var r,c,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,C.a.post("https://619416bd0b39a70017b1570d.mockapi.io/api/v1/contacts",t);case 4:return c=e.sent,a=c.data,e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),A=Object(O.c)("contacts/deleteContact",function(){var e=Object(k.a)(y.a.mark((function e(t,n){var r,c,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,C.a.delete("https://619416bd0b39a70017b1570d.mockapi.io/api/v1/contacts/".concat(t));case 4:return c=e.sent,a=c.data,e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),S=Object(O.d)([],(r={},Object(m.a)(r,I.fulfilled,(function(e,t){return Object(d.a)(t.payload)})),Object(m.a)(r,L.fulfilled,(function(e,t){return[].concat(Object(d.a)(e),[t.payload])})),Object(m.a)(r,A.fulfilled,(function(e,t){return e.filter((function(e){return e.id!==t.payload.id}))})),r)),_=Object(O.d)(!1,(c={},Object(m.a)(c,I.pending,(function(){return!0})),Object(m.a)(c,I.fulfilled,(function(){return!1})),Object(m.a)(c,I.rejected,(function(){return!1})),Object(m.a)(c,L.pending,(function(){return!0})),Object(m.a)(c,L.fulfilled,(function(){return!1})),Object(m.a)(c,L.rejected,(function(){return!1})),Object(m.a)(c,A.pending,(function(){return!0})),Object(m.a)(c,A.fulfilled,(function(){return!1})),Object(m.a)(c,A.rejected,(function(){return!1})),c)),F=Object(O.d)(null,(a={},Object(m.a)(a,I.rejected,(function(e,t){return t.payload})),Object(m.a)(a,L.rejected,(function(e,t){return t.payload})),Object(m.a)(a,A.rejected,(function(e,t){return t.payload})),a)),N=Object(O.d)("",Object(m.a)({},v,(function(e,t){return t.payload}))),R=Object(x.b)({items:S,filter:N,isLoading:_,error:F});C.a.defaults.baseURL="https://connections-api.herokuapp.com";var Z,z=Object.freeze({set:function(e){C.a.defaults.headers.common.Authorization="Bearer ".concat(e)},unset:function(){C.a.defaults.headers.common.Authorization=""}}),U=Object(O.c)("auth/register",function(){var e=Object(k.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("/users/signup",t);case 3:return n=e.sent,r=n.data,z.set(r.token),e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),V=Object(O.c)("auth/login",function(){var e=Object(k.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("/users/login",t);case 3:return n=e.sent,r=n.data,z.set(r.token),e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),q=Object(O.c)("auth/logout",Object(k.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("/users/logout");case 3:return t=e.sent,n=t.data,z.unset(),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),T=Object(O.c)("auth/refresh",function(){var e=Object(k.a)(y.a.mark((function e(t,n){var r,c,a,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(c=r.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return z.set(c),e.prev=5,e.next=8,C.a.get("/users/current");case 8:return a=e.sent,i=a.data,e.abrupt("return",i);case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()),E={register:U,logIn:V,logOut:q,fetchCurrentUser:T},J=Object(O.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},extraReducers:(Z={},Object(m.a)(Z,E.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(m.a)(Z,E.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(m.a)(Z,E.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(m.a)(Z,E.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0})),Z)}).reducer,W={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUserEmail:function(e){return e.auth.user.email}},$=[].concat(Object(d.a)(Object(O.f)({serializableCheck:{ignoredActions:[p.a,p.f,p.b,p.c,p.d,p.e]}})),[function(e){return function(e){return function(t){e(t)}}}]),B={key:"auth",storage:f.a,whitelist:["token"]},D=Object(O.a)({reducer:{contacts:R,auth:Object(p.g)(B,J)},middleware:$,devTools:null!==!0}),G=Object(p.h)(D),M=n(2),H=n(21),K=n(48),P=n(1),Y=["children","to"];var Q=function(e){var t=e.children,n=e.to,r=Object(K.a)(e,Y),c=Object(M.i)(n),a=Object(M.g)({path:c.pathname,end:!0});return Object(P.jsx)("div",{children:Object(P.jsx)(b.b,Object(H.a)(Object(H.a)({style:{textDecoration:a?"underline":"none"},to:n},r),{},{children:t}))})};var X=function(){var e=Object(l.c)(W.getUserEmail),t=Object(l.c)(W.getIsLoggedIn),n=Object(l.b)();return Object(P.jsx)("div",{children:t?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("span",{children:e}),Object(P.jsx)("button",{type:"button",onClick:function(){return n(E.logOut())},children:"Logout"})]}):Object(P.jsxs)("ul",{children:[Object(P.jsx)("li",{children:Object(P.jsx)(Q,{to:"/register",children:"Register"})}),Object(P.jsx)("li",{children:Object(P.jsx)(Q,{to:"/login",children:"Login"})})]})})};var ee=function(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("header",{children:[Object(P.jsx)("nav",{children:Object(P.jsxs)("ul",{children:[Object(P.jsx)("li",{children:Object(P.jsx)(Q,{to:"/",children:"Home"})}),Object(P.jsx)("li",{children:Object(P.jsx)(Q,{to:"/create",children:"Create contact"})})]})}),Object(P.jsx)(X,{})]}),Object(P.jsx)(M.a,{})]})},te=n(33),ne=n.n(te),re=n(18),ce=function(e){return e.contacts.items},ae=function(e){return e.contacts.filter},ie=function(e){return e.contacts.error},se=Object(re.a)([ce,ae],(function(e,t){var n=t.toUpperCase();return e.filter((function(e){return e.name.toUpperCase().includes(n)}))}));var ue=function(){var e=Object(l.c)(ae),t=Object(l.b)();return Object(P.jsx)("section",{className:ne.a.container,children:Object(P.jsxs)("label",{children:["Find contact by name",Object(P.jsx)("input",{type:"text",className:ne.a.input,name:"filter",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",value:e,onChange:function(e){return t(v(e.target.value))}})]})})},oe=n(47),le=n(30),je=n.n(le);var be=function(){var e=Object(l.c)(se),t=Object(l.c)(ie),n=Object(l.b)();return Object(i.useEffect)((function(){n(I())}),[n]),console.log(t&&t.message),Object(P.jsxs)("ul",{className:je.a.list,children:[t&&Object(P.jsx)("li",{children:Object(P.jsx)("h2",{style:{color:"red",textTransform:"uppercase"},children:t.message})}),e&&e.map((function(e){var t=e.id,r=e.name,c=e.phone,a="tel:"+c.replace(/^(\+)|\D/g,"$1");return Object(P.jsxs)("li",{className:je.a.item,children:[Object(P.jsxs)("p",{children:[r,": ",Object(P.jsx)("a",{href:a,children:c})]}),Object(P.jsx)("button",{className:je.a.button,type:"button","data-id":t,onClick:function(e){n(A(e.currentTarget.dataset.id))},children:Object(P.jsx)(oe.a,{})})]},t)}))]})};var de=function(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("h1",{children:"Phonebook"}),Object(P.jsx)(ue,{}),Object(P.jsx)(be,{})]})},Oe=n(5);var pe=function(){Object(l.c)(ce);var e=Object(l.c)(ie);return Object(l.b)(),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(Oe.d,{initialValues:{name:"",number:""},validate:function(e){var t={};return e.name||(t.name="Required"),e.number||(t.number="Required"),t},onSubmit:function(e,t){var n=t.setSubmitting;setTimeout((function(){alert(JSON.stringify(e,null,2)),n(!1)}),400)},children:function(e){var t=e.isSubmitting;return Object(P.jsxs)(Oe.c,{children:[Object(P.jsx)("label",{htmlFor:"name",children:"Name"}),Object(P.jsx)(Oe.b,{type:"text",name:"name",id:"name"}),Object(P.jsx)(Oe.a,{name:"name",component:"div"}),Object(P.jsx)("label",{htmlFor:"phoneNumber",children:"Number"}),Object(P.jsx)(Oe.b,{type:"tel",name:"number",id:"phoneNumber"}),Object(P.jsx)(Oe.a,{name:"number",component:"div"}),Object(P.jsx)("button",{type:"submit",disabled:t,children:"Add contact"})]})}}),e&&Object(P.jsx)("h2",{style:{color:"red",textTransform:"uppercase"},children:e.message})]})};var he=function(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("h1",{children:"Create contact"}),Object(P.jsx)(pe,{})]})};var fe=function(){var e=Object(l.b)();return Object(P.jsx)(Oe.d,{initialValues:{name:"",email:"",password:""},validate:function(e){var t={};return e.name||(t.name="Required"),e.password||(t.password="Required"),e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:function(t,n){var r=n.setSubmitting;e(E.register(t)),r(!1)},children:function(e){var t=e.isSubmitting;return Object(P.jsxs)(Oe.c,{children:[Object(P.jsx)(Oe.b,{type:"text",name:"name"}),Object(P.jsx)(Oe.a,{name:"name",component:"div"}),Object(P.jsx)(Oe.b,{type:"email",name:"email"}),Object(P.jsx)(Oe.a,{name:"email",component:"div"}),Object(P.jsx)(Oe.b,{type:"password",name:"password"}),Object(P.jsx)(Oe.a,{name:"password",component:"div"}),Object(P.jsx)("button",{type:"submit",disabled:t,children:"Submit"})]})}})};var me=function(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("h1",{children:"Register"}),Object(P.jsx)(fe,{})]})};var xe=function(){var e=Object(l.b)();return Object(P.jsx)(Oe.d,{initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:function(t,n){var r=n.setSubmitting;e(E.logIn(t)),r(!1)},children:function(e){var t=e.isSubmitting;return Object(P.jsxs)(Oe.c,{children:[Object(P.jsx)(Oe.b,{type:"email",name:"email"}),Object(P.jsx)(Oe.a,{name:"email",component:"div"}),Object(P.jsx)(Oe.b,{type:"password",name:"password"}),Object(P.jsx)(Oe.a,{name:"password",component:"div"}),Object(P.jsx)("button",{type:"submit",disabled:t,children:"Submit"})]})}})};var ve=function(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("h1",{children:"Login"}),Object(P.jsx)(xe,{})]})};var ge=function(){return Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{children:"Nothing to see here!"}),Object(P.jsx)("p",{children:Object(P.jsx)(b.b,{to:"/",children:"Go to the home page"})})]})};var ye=function(){var e=Object(l.b)();return Object(i.useEffect)((function(){e(E.fetchCurrentUser())}),[]),Object(P.jsx)("div",{className:"container",children:Object(P.jsx)(M.d,{children:Object(P.jsxs)(M.b,{path:"/",element:Object(P.jsx)(ee,{}),children:[Object(P.jsx)(M.b,{index:!0,element:Object(P.jsx)(de,{})}),Object(P.jsx)(M.b,{path:"create",element:Object(P.jsx)(he,{})}),Object(P.jsx)(M.b,{path:"register",element:Object(P.jsx)(me,{})}),Object(P.jsx)(M.b,{path:"login",element:Object(P.jsx)(ve,{})}),Object(P.jsx)(M.b,{path:"*",element:Object(P.jsx)(ge,{})})]})})})};n(82);o.a.render(Object(P.jsx)(s.a.StrictMode,{children:Object(P.jsx)(l.a,{store:D,children:Object(P.jsx)(j.a,{loading:null,persistor:G,children:Object(P.jsx)(b.a,{children:Object(P.jsx)(ye,{})})})})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.abd15448.chunk.js.map